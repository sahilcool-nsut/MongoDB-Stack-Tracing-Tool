# Eu-Stack Analyzer
./stackReport

This is a tool to provide individual stack reports, particularly aimed for analyzing Running MongoDB servers.

It sets up a flask server which prompts to upload the necessary files, which are
 - **Single iteration of eu-stack**
 > Sample Command
 >
 > sudo eu-stack -p PID > stack>txt
 - **Single iteration of top command**
 > Sample Command
 >
 > top -H -bn1 | grep "conn" > topH.txt
 > 
 > -b for batch mode, -n1 for limiting to 1 iteration. As it is aimed for MongoDB client queries, "conn" named threads are considered (these are MongoDB Clients)

It uses the combination of a **single iteration of eu-stack** and **top** command to provide insights and analysis using different graphs, by rendering a HTML page. This is done using a **python** script.

!["Individual Stack Report Screenshot"](https://github.com/sahilcool-nsut/MongoDB-Stack-Tracing-Tool/blob/main/Screenshots/StackReportScreenshot "Individual Stack Report")

### Features
Provides a HTML page with simple UI showing the following information in form of **graphs/tables**

 - Thread State Distribution
 - Call Stack (Flame Graph)
 - Identical Stack Trace Distribution
 - Top CPU Consuming Threads
 - Most Used Functions
 - Individual Thread Details

### Usage
To locally run the program, follow the steps given below
 - For initial dependency setup, a requirements.txt is provided
 > pip install -r requirements.txt
 - Run the Flask App by running the command
 > python app.py
 >
 > or
 >
 > flask run
 - Now, the server should be up on localhost:5000
 - !["Upload Files Landing Page"](https://github.com/sahilcool-nsut/MongoDB-Stack-Tracing-Tool/blob/main/Screenshots/UploadScreen.png "Upload Files Landing Page")
 - Go to localhost:5000 and upload the required files. (basic error handling is present to avoid empty files)
 - Press Submit and you will get the results

Current Directory Structure:
 - stackReport
    - data&emsp;&emsp;&emsp;&emsp;&emsp;-> this is the directory where files uploaded are saved.
    - static 
      - graphs&emsp;&emsp;&emsp;&emsp;&emsp; -> graphs generated by script are stored here
      - scripts&emsp;&emsp;&emsp;&emsp;&emsp;-> local JS files
      - styles&emsp;&emsp;&emsp;&emsp;&emsp; -> local CSS files
    - templates &emsp;&emsp;&emsp;&emsp;&emsp;-> Home HTML file, and also where the generated HTML file is stored
    - app.py
    - createStackReport.py
    - README-StackReport.md
    - requirements.txt
    
    
